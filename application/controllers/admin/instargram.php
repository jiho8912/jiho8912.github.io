<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Instargram extends CI_Controller {

	 /**
	 * 생성자
	 *사용할 모델을 로드해온다 
	 */
	function __construct()
	{
		parent::__construct();
		$this->load->model('member_m'); //member controller model
		$this->load->model('admin/admin_m');
		$this->load->model('admin/admin_menu_m');
	}
	public function index()
	{
		$data['url'] = $this->uri->segment(2); //url

		// 카테고리 리스트
		$data['admin_category_list'] = $this->admin_menu_m->select_category_tree();

		//로그인 안했을경우
		if(!$this->session->userdata('mb_id')){;
			$this->load->view('admin/admin_header_v',$data); // 헤더
			$this->load->view('admin/admin_login_v');
			$this->load->view('admin/admin_footer_v'); // 푸터
		}else{
			//관리자정보 가져오기
			$admin_id = $this->member_m->select_mb_detail($this->session->userdata('mb_id'));

			if($admin_id['no'] != 1)
			{
				$this->member_m->alert('관리자가 아닙니다.','/');
			}else{
				$this->load->view('admin/admin_header_v',$data); // 헤더
				$this->load->view('admin/admin_left_menu_v',$data); // 좌측메뉴
				$this->load->view('admin/admin_index_v');
				$this->load->view('admin/admin_footer_v'); // 푸터
			}
		}

	}

}

